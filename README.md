# 信息收集工具

一个功能强大的网络资产信息收集工具，支持多目标、多线程、智能字典等特性。

## 功能特性

### 基础信息收集
- **域名解析**：获取目标域名对应的IP地址
- **端口扫描**：检测开放端口并识别服务类型
- **服务识别**：识别HTTP服务、标题、状态码等信息
- **技术栈识别**：检测网站使用的技术栈（如PHP、ASP、JSP等）

### 高级功能
- **子域名爆破**：基于字典的子域名枚举
- **目录爆破**：智能识别技术栈并选择对应的目录字典
- **C段扫描**：扫描目标IP所在的C段网络
- **反向IP查询**：查询同一IP上的其他网站

### 其他特性
- **多目标支持**：支持同时输入多个目标进行扫描
- **多线程扫描**：可配置线程数，提高扫描效率
- **结果导出**：支持将结果导出为JSON和CSV格式
- **树状图展示**：直观展示资产层级关系
- **实时状态监控**：查看扫描进度和日志

## 安装和运行

### 环境要求
- Python 3.6+

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行程序
```bash
python app.py
```

程序将在 `http://0.0.0.0:5000` 启动，打开浏览器访问即可使用。

## 使用说明

### 1. 输入目标
在目标输入框中输入要收集的目标，可以是域名或IP地址。支持批量输入，每个目标占一行。

### 2. 配置参数
- **线程数**：设置扫描线程数，默认20
- **超时时间**：设置连接超时时间，默认5秒
- **重试次数**：设置失败重试次数，默认2次
- **子域名爆破**：是否启用子域名爆破功能
- **目录爆破**：是否启用目录爆破功能
- **HTTP方法**：选择目录爆破使用的HTTP方法
- **状态码白名单**：设置要保留的HTTP状态码

### 3. 开始收集
点击「开始收集」按钮，程序将开始对目标进行信息收集。

### 4. 查看结果
- **实时日志**：查看收集过程中的详细日志
- **结果列表**：查看收集到的资产信息
- **树状图**：点击「查看树状图」按钮，以树状结构展示资产关系

### 5. 导出结果
可以将单个目标或所有目标的结果导出为ZIP压缩包，包含JSON和CSV格式的结果文件。

## 程序结构

```
asset_collector/
├── app.py              # 主程序入口和API接口
├── static/             # 静态文件目录
│   ├── index.html      # 主页面
│   ├── tree_view.html  # 树状图页面
│   ├── css/            # CSS样式文件
│   ├── js/             # JavaScript文件
│   ├── dict/           # 目录爆破字典
│   └── 子域名/         # 子域名字典
├── asset_results/      # 结果存储目录
├── requirements.txt    # 依赖包列表
└── README.md           # 程序说明文档
```

## API接口说明

### 1. 启动收集任务
- **URL**：`/api/start`
- **方法**：`POST`
- **参数**：
  - `targets`：目标列表（换行分隔）
  - `params`：配置参数
- **返回**：JSON格式的响应

### 2. 停止收集任务
- **URL**：`/api/stop`
- **方法**：`POST`
- **返回**：JSON格式的响应

### 3. 获取收集状态
- **URL**：`/api/status`
- **方法**：`GET`
- **返回**：收集状态、当前目标、日志等信息

### 4. 导出单个目标结果
- **URL**：`/api/export/<target>`
- **方法**：`GET`
- **返回**：ZIP压缩包

### 5. 导出所有结果
- **URL**：`/api/export/all`
- **方法**：`GET`
- **返回**：ZIP压缩包

### 6. 获取字典列表
- **URL**：`/api/dict/list`
- **方法**：`GET`
- **返回**：可用的目录字典列表

## 注意事项

1. **合法使用**：请确保您对目标具有合法的授权，遵守相关法律法规
2. **网络环境**：扫描过程可能会产生大量网络流量，请在合适的网络环境下使用
3. **性能消耗**：高线程数可能会导致系统资源消耗较大，请根据实际情况调整
4. **字典选择**：合理选择字典文件，过大的字典会导致扫描时间过长
5. **结果存储**：扫描结果默认存储在 `asset_results` 目录下

## 更新日志

- 修复了静态文件路径问题
- 优化了日志输出，限制日志数量
- 实现了自定义树状图，解决了CDN资源加载问题
- 修复了多线程扫描的稳定性问题
- 优化了结果导出功能

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

如果喜欢此项目，可以请作者喝杯咖啡支持一下
[wx.png](https://github.com/superbaby12138/Information-Collection/blob/main/wx.png)
